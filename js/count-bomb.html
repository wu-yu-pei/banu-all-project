<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>

    // 十次机会
    let count = 10

    const MIN = -10

    const MAX = 100

    //  初始化 游戏
    function initGame(min = 0, max = 100) {

      counts = getAOrderArray(min, max)

      bombCount = getRandoMINt(min, max)

      console.log(
        `本次游戏的炸弹数字为: ${bombCount},猜测范围${min}-${max}.
        在控制台调用playGame函数开始游戏 例如:playGame(10).
        在控制台调用resetData函数重置游戏 例如:resetData()`
      );
    }

    function playGame(currentCount = '') {
      let currentCountIndex = getIndexFromArray(counts, currentCount)
      let bombCountIndex = getIndexFromArray(counts, bombCount)

      // 边界判断
      if(currentCountIndex == -1) {
        return  console.log(`猜测超出边界值,请重新猜测，你还剩${count}次机会,猜测范围${counts[0]}-${counts[counts.length - 1]}`)
      }

      // 猜测失败 游戏结束
      if(currentCount == bombCount) {
        console.log('失败了，你猜中了炸弹数字')
        return initGame(MIN, MAX)
      }

      // 猜测成功 游戏结束
      if(--count == 0) {
        console.log('成功了，你没有猜中炸弹数字')
        return initGame(MIN, MAX)
      }


      if(currentCountIndex > bombCountIndex) {
        // 剪去 右边
        counts.splice(currentCountIndex - counts.length)
      }else {
        // 剪去 左边
        counts.splice(0, currentCountIndex + 1)
      }

      console.log(`你还剩${count}次机会,本次猜测范围${counts[0]}-${counts[counts.length - 1]}`)
    }

    // 获取一个MIN - MAX内的随机整数
    function getRandoMINt(min, max) {
      return Math.floor(Math.random() * max + min + 1)
    }

    // 获取指元素在数组中的位置
    function getIndexFromArray(array, value) {
      return array.indexOf(value)
    }

    // 获取一个count顺序数组
    function getAOrderArray(min, max) {
      return new Array(Math.abs(min - max) + 1).fill(0).map((_, index) => index + min)
    }

    // 重置数据
    function resetData(message = '已重置游戏') {
      count = 10
      counts = getAOrderArray(MIN, MAX)
      bombCount = getRandoMINt(MIN, MAX)
      console.log(message)
      console.log('炸弹数字：', bombCount);
    }

    initGame(MIN, MAX)
  </script>
</body>
</html>